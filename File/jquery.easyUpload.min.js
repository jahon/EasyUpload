(function(n,t){var i=function(i,r){"use strict";var u=this,f;u.target=typeof i=="object"?i:t(i),u.options={form:t("form")[0],url:"",type:"binary",onAbort:null,onError:null,onLoadStart:null,onLoad:null,onLoadEnd:null,onProgress:null,onPreview:null};for(f in r)u.options[f]=r[f];n.URL=n.URL||n.webkitURL,XMLHttpRequest.prototype.sendAsBinary=function(n){function t(n){return n.charCodeAt(0)&255}var i=Array.prototype.map.call(n,t),r=new Uint8Array(i);this.send(r)}};i.prototype={preview:function(){if(this.options.onPreview)this.options.onPreview(this._temp)},_temp:[],upload:function(){var n=this,t=n._getFiles(n.target.get(0).files);return n._sendFiles(),t},_getFiles:function(t){var r,i,u,f;if(this._temp=[],t){for(r=0;r<t.length;r++){if(i=t[r],u=/image.*/,!i.type.match(u)){alert("选择格式不正确。");continue}console.log(n.URL),f=n.URL.createObjectURL(i),n.URL.revokeObjectURL(this.src),i.src=f,this._temp.push(i)}this.preview()}else alert("没选择文件。。");return this._temp},_sendFiles:function(){for(var n=0;n<this._temp.length;n++)this._fileUpload("",this._temp[n])},_fileUpload:function(n,t){var i=this,u=new XMLHttpRequest,r=new FileReader,f=new FormData;i.xhr=u,u.open("POST",i.options.url+(i.options.url.indexOf("?")<0?"?":"&")+"s-params="+i.options.type,!0),f.append(t.name,t),r.onerror=function(n){console.log(n),console.log("error");switch(n.target.error.code){case n.target.error.NOT_FOUND_ERR:alert("File Not Found!");break;case n.target.error.NOT_READABLE_ERR:alert("File is not readable");break;case n.target.error.ABORT_ERR:break;default:alert("An error occurred reading this file.")}i.options.onError&&i.options.onError.call(i)},r.onprogress=function(n){if(n.lengthComputable){var t=Math.round(n.loaded*100/n.total);if(i.options.onProgress)i.options.onProgress(i,t)}},r.onabort=function(){console.log("abort"),r.abort(),i.options.onAbort&&i.options.onAbort.call(i)},r.onloadstart=function(){console.log("loadStart"),i.options.onLoadStart&&i.options.onLoadStart.call(i)},r.onload=function(n){u.sendAsBinary(n.target.result),i.options.onLoad&&i.options.onLoad.call(i)},r.onloadend=function(){console.log("loadEnd---------"),i.options.onLoadEnd&&i.options.onLoadEnd.call(i)};switch(i.options.type){case"form":u.send(f);break;case"base64":r.readAsDataURL(t);break;case"binary":r.readAsBinaryString(t);break;default:r.readAsText(t)}return i}},typeof exports!="undefined"&&(exports.easyUpload=i),n.easyUpload=i})(window,jQuery);
//@ sourceMappingURL=jquery.easyUpload.min.js.map